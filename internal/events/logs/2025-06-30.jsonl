{"timestamp":"2025-06-30T07:36:23.832322+02:00","level":"INFO","message":"Logger initialized","data":{"component":"","dev_mode":true,"log_dir":"./logs","min_level":"DEBUG"},"caller":"logging/logger.go:137","environment":"development"}
{"timestamp":"2025-06-30T07:36:23.832403+02:00","level":"INFO","message":"V8 pool initialized successfully","data":{"poolSize":4,"source":"v8-pool"},"caller":"logging/logger.go:678","environment":"development"}
{"timestamp":"2025-06-30T07:36:23.833771+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"001","config_exists":{"runtime":""},"event":"aftercommit","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:23.83382+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"001","config_exists":{"runtime":""},"event":"beforerequest","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:23.833852+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"001","config_exists":{"runtime":""},"event":"get","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:23.83389+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"001","config_exists":{"runtime":""},"event":"validate","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:23.833916+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"001","config_exists":{"runtime":"go"},"event":"post","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:23.833992+02:00","level":"INFO","message":"Compiling Go event script","component":"events","data":{"collection":"001","script":"post.go","source_path":"/var/folders/8k/r51k3md137dfl_qztlbdcp8h0000gp/T/TestGoEventHandlers3837135101/001/post.go"},"caller":"events/manager.go:104","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.173937+02:00","level":"INFO","message":"Successfully compiled Go event script","component":"events","data":{"collection":"001","plugin_path":"/var/folders/8k/r51k3md137dfl_qztlbdcp8h0000gp/T/TestGoEventHandlers3837135101/001/.plugins/post.so","script":"post.go"},"caller":"events/manager.go:120","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.173983+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"001","config_exists":{"runtime":""},"event":"put","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.17402+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"001","config_exists":{"runtime":""},"event":"delete","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.174058+02:00","level":"DEBUG","message":"üöÄ EVENT TRIGGERED","data":{"collection":"","method":"POST","payload":{"name":"Test Item","value":42},"source":"event","type":"Post","user":null},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.174119+02:00","level":"DEBUG","message":"üîç CHECKING SCRIPT AVAILABILITY","data":{"allScripts":{"Post":"go"},"eventType":"Post","exists":true,"goPlugins":1,"jsScripts":0,"scriptType":"go","source":"event"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.174139+02:00","level":"DEBUG","message":"üîß EXECUTING GO SCRIPT","data":{"collection":"","eventType":"Post","hasScript":true,"pluginPath":"/var/folders/8k/r51k3md137dfl_qztlbdcp8h0000gp/T/TestGoEventHandlers3837135101/001/.plugins/post.so","source":"event"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.477779+02:00","level":"DEBUG","message":"Go plugin execution details","data":{"cancelled":false,"execTimeMs":0,"hasErrors":false,"loadTimeMs":303,"plugin":"post.so","source":"go-plugin","totalTimeMs":303},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.477814+02:00","level":"DEBUG","message":"üîß GO PLUGIN EXECUTION RESULT","data":{"dataAfter":{"name":"Modified: Test Item","processed":true,"processedAt":"2025-06-30T07:36:25+02:00","value":42},"error":null,"eventType":"Post","source":"event"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.477857+02:00","level":"DEBUG","message":"Event completed","data":{"collection":"","dataModified":{"name":"Modified: Test Item","processed":true,"processedAt":"2025-06-30T07:36:25+02:00","value":42},"duration":"303.791981ms","durationMs":303,"runtime":"go","source":"event","type":"Post"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.479262+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"001","config_exists":{"runtime":""},"event":"aftercommit","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.479296+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"001","config_exists":{"runtime":""},"event":"beforerequest","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.479319+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"001","config_exists":{"runtime":""},"event":"get","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.479339+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"001","config_exists":{"runtime":""},"event":"validate","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.479356+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"001","config_exists":{"runtime":"js"},"event":"post","runtime":"js"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.4794+02:00","level":"DEBUG","message":"JavaScript source stored for compilation","data":{"filePath":"/var/folders/8k/r51k3md137dfl_qztlbdcp8h0000gp/T/TestJavaScriptEventHandlers2619051326/001/post.js","source":"v8-pool"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.479416+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"001","config_exists":{"runtime":""},"event":"put","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.479434+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"001","config_exists":{"runtime":""},"event":"delete","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.479486+02:00","level":"DEBUG","message":"üöÄ EVENT TRIGGERED","data":{"collection":"","method":"POST","payload":{"name":"Test Item","value":42},"source":"event","type":"Post","user":null},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.479515+02:00","level":"DEBUG","message":"üîç CHECKING SCRIPT AVAILABILITY","data":{"allScripts":{"Post":"js"},"eventType":"Post","exists":true,"goPlugins":0,"jsScripts":1,"scriptType":"js","source":"event"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.479526+02:00","level":"DEBUG","message":"üîß EXECUTING JS SCRIPT","data":{"collection":"","eventType":"Post","hasScript":true,"source":"event"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.479543+02:00","level":"DEBUG","message":"Executing precompiled JavaScript script with V8 pool","data":{"scriptPath":"/var/folders/8k/r51k3md137dfl_qztlbdcp8h0000gp/T/TestJavaScriptEventHandlers2619051326/001/post.js","source":"js-execution"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.480045+02:00","level":"DEBUG","message":"Setting up JavaScript environment (V8)","data":{"dataKeys":"[REDACTED]","dataLen":2,"hasData":true,"source":"js-context"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.48032+02:00","level":"DEBUG","message":"Calling JavaScript Run(context) function (V8 pool)","data":{"hasContext":true,"hasRun":true,"source":"js-execution"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.481339+02:00","level":"INFO","message":"JavaScript context.log","data":{"message":"JavaScript handler modified data:","source":"js-context"},"caller":"logging/logger.go:678","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.481412+02:00","level":"DEBUG","message":"Extracted context.data JSON from V8","data":{"contextDataJSON":"{\"name\":\"JS Modified: Test Item\",\"value\":42,\"processed\":true,\"processedAt\":\"2025-06-30T05:36:25.480Z\"}","source":"js-extraction"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.481462+02:00","level":"DEBUG","message":"Successfully parsed context.data","data":{"contextDataKeys":"[REDACTED]","contextDataLen":4,"source":"js-extraction"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.481484+02:00","level":"INFO","message":"JavaScript execution timing","data":{"acquireTimeMs":0,"errorCount":0,"execTimeMs":1,"hasErrors":false,"pooled":true,"script":"post.js","source":"js-timing","totalTimeMs":1},"caller":"logging/logger.go:678","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.481496+02:00","level":"DEBUG","message":"JavaScript execution completed (V8 pool)","data":{"errors":{},"hasCancelled":false,"hasErrors":false,"source":"js-execution"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.481589+02:00","level":"DEBUG","message":"Event completed","data":{"collection":"","dataModified":{"name":"JS Modified: Test Item","processed":true,"processedAt":"2025-06-30T05:36:25.480Z","value":42},"duration":"2.092172ms","durationMs":2,"runtime":"js","source":"event","type":"Post"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.48188+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"001","config_exists":{"runtime":""},"event":"get","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.481925+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"001","config_exists":{"runtime":"js"},"event":"validate","runtime":"js"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.481996+02:00","level":"DEBUG","message":"JavaScript source stored for compilation","data":{"filePath":"/var/folders/8k/r51k3md137dfl_qztlbdcp8h0000gp/T/TestJavaScriptEventHandlers2619051326/001/validate.js","source":"v8-pool"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.482032+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"001","config_exists":{"runtime":""},"event":"post","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.482063+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"001","config_exists":{"runtime":""},"event":"put","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.482086+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"001","config_exists":{"runtime":""},"event":"delete","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.482109+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"001","config_exists":{"runtime":""},"event":"aftercommit","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.482146+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"001","config_exists":{"runtime":""},"event":"beforerequest","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.482175+02:00","level":"DEBUG","message":"üöÄ EVENT TRIGGERED","data":{"collection":"","method":"POST","payload":{"name":"Valid Item","value":42},"source":"event","type":"Validate","user":null},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.482207+02:00","level":"DEBUG","message":"üîç CHECKING SCRIPT AVAILABILITY","data":{"allScripts":{"Validate":"js"},"eventType":"Validate","exists":true,"goPlugins":0,"jsScripts":1,"scriptType":"js","source":"event"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.482222+02:00","level":"DEBUG","message":"üîß EXECUTING JS SCRIPT","data":{"collection":"","eventType":"Validate","hasScript":true,"source":"event"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.482236+02:00","level":"DEBUG","message":"Executing precompiled JavaScript script with V8 pool","data":{"scriptPath":"/var/folders/8k/r51k3md137dfl_qztlbdcp8h0000gp/T/TestJavaScriptEventHandlers2619051326/001/validate.js","source":"js-execution"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.482454+02:00","level":"DEBUG","message":"Setting up JavaScript environment (V8)","data":{"dataKeys":"[REDACTED]","dataLen":2,"hasData":true,"source":"js-context"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.482622+02:00","level":"DEBUG","message":"Calling JavaScript Run(context) function (V8 pool)","data":{"hasContext":true,"hasRun":true,"source":"js-execution"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.482708+02:00","level":"INFO","message":"JavaScript context.log","data":{"message":"JavaScript validation passed for data:","source":"js-context"},"caller":"logging/logger.go:678","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.482744+02:00","level":"DEBUG","message":"Extracted context.data JSON from V8","data":{"contextDataJSON":"{\"name\":\"Valid Item\",\"value\":42}","source":"js-extraction"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.482776+02:00","level":"DEBUG","message":"Successfully parsed context.data","data":{"contextDataKeys":"[REDACTED]","contextDataLen":2,"source":"js-extraction"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.482793+02:00","level":"INFO","message":"JavaScript execution timing","data":{"acquireTimeMs":0,"errorCount":0,"execTimeMs":0,"hasErrors":false,"pooled":true,"script":"validate.js","source":"js-timing","totalTimeMs":0},"caller":"logging/logger.go:678","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.482802+02:00","level":"DEBUG","message":"JavaScript execution completed (V8 pool)","data":{"errors":{},"hasCancelled":false,"hasErrors":false,"source":"js-execution"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.482884+02:00","level":"DEBUG","message":"Event completed","data":{"collection":"","dataModified":{"name":"Valid Item","value":42},"duration":"694.68¬µs","durationMs":0,"runtime":"js","source":"event","type":"Validate"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.482905+02:00","level":"DEBUG","message":"üöÄ EVENT TRIGGERED","data":{"collection":"","method":"POST","payload":{"name":"","value":-5},"source":"event","type":"Validate","user":null},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.482924+02:00","level":"DEBUG","message":"üîç CHECKING SCRIPT AVAILABILITY","data":{"allScripts":{"Validate":"js"},"eventType":"Validate","exists":true,"goPlugins":0,"jsScripts":1,"scriptType":"js","source":"event"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.482943+02:00","level":"DEBUG","message":"üîß EXECUTING JS SCRIPT","data":{"collection":"","eventType":"Validate","hasScript":true,"source":"event"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.482956+02:00","level":"DEBUG","message":"Executing precompiled JavaScript script with V8 pool","data":{"scriptPath":"/var/folders/8k/r51k3md137dfl_qztlbdcp8h0000gp/T/TestJavaScriptEventHandlers2619051326/001/validate.js","source":"js-execution"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.483134+02:00","level":"DEBUG","message":"Setting up JavaScript environment (V8)","data":{"dataKeys":"[REDACTED]","dataLen":2,"hasData":true,"source":"js-context"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.483285+02:00","level":"DEBUG","message":"Calling JavaScript Run(context) function (V8 pool)","data":{"hasContext":true,"hasRun":true,"source":"js-execution"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.483486+02:00","level":"DEBUG","message":"Run(context) function execution failed","data":{"error":"CANCEL","source":"js-execution"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.483569+02:00","level":"DEBUG","message":"Extracted context.data JSON from V8","data":{"contextDataJSON":"{\"name\":\"\",\"value\":-5}","source":"js-extraction"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.483591+02:00","level":"DEBUG","message":"Successfully parsed context.data","data":{"contextDataKeys":"[REDACTED]","contextDataLen":2,"source":"js-extraction"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.483601+02:00","level":"INFO","message":"JavaScript execution timing","data":{"acquireTimeMs":0,"errorCount":0,"execTimeMs":0,"hasErrors":false,"pooled":true,"script":"validate.js","source":"js-timing","totalTimeMs":0},"caller":"logging/logger.go:678","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.483611+02:00","level":"DEBUG","message":"JavaScript execution completed (V8 pool)","data":{"errors":{},"hasCancelled":true,"hasErrors":false,"source":"js-execution"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.483674+02:00","level":"ERROR","message":"Event failed","data":{"collection":"","duration":"761.832¬µs","durationMs":0,"error":"name field is required and cannot be empty","runtime":"js","source":"event","type":"Validate"},"caller":"logging/logger.go:694","stack_trace":"goroutine 37 [running]:\ngithub.com/hjanuschka/go-deployd/internal/logging.getStackTrace(...)\n\t/Users/hjanuschka/go-deployd/internal/logging/logger.go:268\ngithub.com/hjanuschka/go-deployd/internal/logging.(*Logger).log(0xc0001fcb40, 0x3, {0x1035aef0a, 0xc}, 0xc00016cd50)\n\t/Users/hjanuschka/go-deployd/internal/logging/logger.go:405 +0x4f1\ngithub.com/hjanuschka/go-deployd/internal/logging.(*Logger).Error(0xc0001fcb40, {0x1035aef0a, 0xc}, {0xc00016cfd0, 0x1, 0xc00012df31?})\n\t/Users/hjanuschka/go-deployd/internal/logging/logger.go:441 +0x136\ngithub.com/hjanuschka/go-deployd/internal/logging.Error({0x1035aef0a, 0xc}, {0x1035aafbc, 0x5}, 0xc00016d5b0)\n\t/Users/hjanuschka/go-deployd/internal/logging/logger.go:694 +0x234\ngithub.com/hjanuschka/go-deployd/internal/events.(*UniversalScriptManager).RunEvent(0xc000110840, {0x1035ac662, 0x8}, 0xc000164160, 0xc0003789c0)\n\t/Users/hjanuschka/go-deployd/internal/events/manager.go:313 +0x14cd\ngithub.com/hjanuschka/go-deployd/internal/events_test.TestJavaScriptEventHandlers.func2(0xc000102700)\n\t/Users/hjanuschka/go-deployd/internal/events/integration_test.go:199 +0x426\ntesting.tRunner(0xc000102700, 0xc000114300)\n\t/usr/local/Cellar/go/1.24.4/libexec/src/testing/testing.go:1792 +0xf4\ncreated by testing.(*T).Run in goroutine 35\n\t/usr/local/Cellar/go/1.24.4/libexec/src/testing/testing.go:1851 +0x413\n","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.48518+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"001","config_exists":{"runtime":""},"event":"aftercommit","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.485214+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"001","config_exists":{"runtime":""},"event":"beforerequest","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.485235+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"001","config_exists":{"runtime":""},"event":"get","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.485255+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"001","config_exists":{"runtime":"js"},"event":"validate","runtime":"js"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.485346+02:00","level":"DEBUG","message":"JavaScript source stored for compilation","data":{"filePath":"/var/folders/8k/r51k3md137dfl_qztlbdcp8h0000gp/T/TestEventHandlerExecution2234192754/001/validate.js","source":"v8-pool"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.485368+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"001","config_exists":{"runtime":"js"},"event":"post","runtime":"js"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.485409+02:00","level":"DEBUG","message":"JavaScript source stored for compilation","data":{"filePath":"/var/folders/8k/r51k3md137dfl_qztlbdcp8h0000gp/T/TestEventHandlerExecution2234192754/001/post.js","source":"v8-pool"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.48543+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"001","config_exists":{"runtime":""},"event":"put","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.485453+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"001","config_exists":{"runtime":""},"event":"delete","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.485475+02:00","level":"DEBUG","message":"üöÄ EVENT TRIGGERED","data":{"collection":"","method":"POST","payload":{"name":"Test","value":42},"source":"event","type":"Post","user":null},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.485513+02:00","level":"DEBUG","message":"üîç CHECKING SCRIPT AVAILABILITY","data":{"allScripts":{"Post":"js","Validate":"js"},"eventType":"Post","exists":true,"goPlugins":0,"jsScripts":2,"scriptType":"js","source":"event"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.485535+02:00","level":"DEBUG","message":"üîß EXECUTING JS SCRIPT","data":{"collection":"","eventType":"Post","hasScript":true,"source":"event"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.485554+02:00","level":"DEBUG","message":"Executing precompiled JavaScript script with V8 pool","data":{"scriptPath":"/var/folders/8k/r51k3md137dfl_qztlbdcp8h0000gp/T/TestEventHandlerExecution2234192754/001/post.js","source":"js-execution"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.485789+02:00","level":"DEBUG","message":"Setting up JavaScript environment (V8)","data":{"dataKeys":"[REDACTED]","dataLen":2,"hasData":true,"source":"js-context"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.485954+02:00","level":"DEBUG","message":"Calling JavaScript Run(context) function (V8 pool)","data":{"hasContext":true,"hasRun":true,"source":"js-execution"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.486023+02:00","level":"DEBUG","message":"Extracted context.data JSON from V8","data":{"contextDataJSON":"{\"name\":\"Test\",\"value\":42,\"eventType\":\"post\",\"processed\":true}","source":"js-extraction"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.486046+02:00","level":"DEBUG","message":"Successfully parsed context.data","data":{"contextDataKeys":"[REDACTED]","contextDataLen":4,"source":"js-extraction"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.486057+02:00","level":"INFO","message":"JavaScript execution timing","data":{"acquireTimeMs":0,"errorCount":0,"execTimeMs":0,"hasErrors":false,"pooled":true,"script":"post.js","source":"js-timing","totalTimeMs":0},"caller":"logging/logger.go:678","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.486064+02:00","level":"DEBUG","message":"JavaScript execution completed (V8 pool)","data":{"errors":{},"hasCancelled":false,"hasErrors":false,"source":"js-execution"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.486159+02:00","level":"DEBUG","message":"Event completed","data":{"collection":"","dataModified":{"eventType":"post","name":"Test","processed":true,"value":42},"duration":"666.654¬µs","durationMs":0,"runtime":"js","source":"event","type":"Post"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.48618+02:00","level":"DEBUG","message":"üöÄ EVENT TRIGGERED","data":{"collection":"","method":"POST","payload":{"name":"Test","value":42},"source":"event","type":"Validate","user":null},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.486192+02:00","level":"DEBUG","message":"üîç CHECKING SCRIPT AVAILABILITY","data":{"allScripts":{"Post":"js","Validate":"js"},"eventType":"Validate","exists":true,"goPlugins":0,"jsScripts":2,"scriptType":"js","source":"event"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.486202+02:00","level":"DEBUG","message":"üîß EXECUTING JS SCRIPT","data":{"collection":"","eventType":"Validate","hasScript":true,"source":"event"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.486239+02:00","level":"DEBUG","message":"Executing precompiled JavaScript script with V8 pool","data":{"scriptPath":"/var/folders/8k/r51k3md137dfl_qztlbdcp8h0000gp/T/TestEventHandlerExecution2234192754/001/validate.js","source":"js-execution"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.486385+02:00","level":"DEBUG","message":"Setting up JavaScript environment (V8)","data":{"dataKeys":"[REDACTED]","dataLen":2,"hasData":true,"source":"js-context"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.486503+02:00","level":"DEBUG","message":"Calling JavaScript Run(context) function (V8 pool)","data":{"hasContext":true,"hasRun":true,"source":"js-execution"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.486569+02:00","level":"DEBUG","message":"Extracted context.data JSON from V8","data":{"contextDataJSON":"{\"name\":\"Test\",\"value\":42,\"validated\":true}","source":"js-extraction"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.48659+02:00","level":"DEBUG","message":"Successfully parsed context.data","data":{"contextDataKeys":"[REDACTED]","contextDataLen":3,"source":"js-extraction"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.4866+02:00","level":"INFO","message":"JavaScript execution timing","data":{"acquireTimeMs":0,"errorCount":0,"execTimeMs":0,"hasErrors":false,"pooled":true,"script":"validate.js","source":"js-timing","totalTimeMs":0},"caller":"logging/logger.go:678","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.486608+02:00","level":"DEBUG","message":"JavaScript execution completed (V8 pool)","data":{"errors":{},"hasCancelled":false,"hasErrors":false,"source":"js-execution"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.486676+02:00","level":"DEBUG","message":"Event completed","data":{"collection":"","dataModified":{"name":"Test","validated":true,"value":42},"duration":"480.415¬µs","durationMs":0,"runtime":"js","source":"event","type":"Validate"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.486717+02:00","level":"DEBUG","message":"üöÄ EVENT TRIGGERED","data":{"collection":"","method":"POST","payload":{"value":42},"source":"event","type":"Validate","user":null},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.486732+02:00","level":"DEBUG","message":"üîç CHECKING SCRIPT AVAILABILITY","data":{"allScripts":{"Post":"js","Validate":"js"},"eventType":"Validate","exists":true,"goPlugins":0,"jsScripts":2,"scriptType":"js","source":"event"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.486741+02:00","level":"DEBUG","message":"üîß EXECUTING JS SCRIPT","data":{"collection":"","eventType":"Validate","hasScript":true,"source":"event"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.486759+02:00","level":"DEBUG","message":"Executing precompiled JavaScript script with V8 pool","data":{"scriptPath":"/var/folders/8k/r51k3md137dfl_qztlbdcp8h0000gp/T/TestEventHandlerExecution2234192754/001/validate.js","source":"js-execution"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.486888+02:00","level":"DEBUG","message":"Setting up JavaScript environment (V8)","data":{"dataKeys":"[REDACTED]","dataLen":1,"hasData":true,"source":"js-context"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.487012+02:00","level":"DEBUG","message":"Calling JavaScript Run(context) function (V8 pool)","data":{"hasContext":true,"hasRun":true,"source":"js-execution"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.487136+02:00","level":"DEBUG","message":"Run(context) function execution failed","data":{"error":"CANCEL","source":"js-execution"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.487176+02:00","level":"DEBUG","message":"Extracted context.data JSON from V8","data":{"contextDataJSON":"{\"value\":42}","source":"js-extraction"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.487195+02:00","level":"DEBUG","message":"Successfully parsed context.data","data":{"contextDataKeys":"[REDACTED]","contextDataLen":1,"source":"js-extraction"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.487212+02:00","level":"INFO","message":"JavaScript execution timing","data":{"acquireTimeMs":0,"errorCount":0,"execTimeMs":0,"hasErrors":false,"pooled":true,"script":"validate.js","source":"js-timing","totalTimeMs":0},"caller":"logging/logger.go:678","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.487222+02:00","level":"DEBUG","message":"JavaScript execution completed (V8 pool)","data":{"errors":{},"hasCancelled":true,"hasErrors":false,"source":"js-execution"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.487287+02:00","level":"ERROR","message":"Event failed","data":{"collection":"","duration":"558.744¬µs","durationMs":0,"error":"Name is required","runtime":"js","source":"event","type":"Validate"},"caller":"logging/logger.go:694","stack_trace":"goroutine 39 [running]:\ngithub.com/hjanuschka/go-deployd/internal/logging.getStackTrace(...)\n\t/Users/hjanuschka/go-deployd/internal/logging/logger.go:268\ngithub.com/hjanuschka/go-deployd/internal/logging.(*Logger).log(0xc0001fcb40, 0x3, {0x1035aef0a, 0xc}, 0xc00016ccf8)\n\t/Users/hjanuschka/go-deployd/internal/logging/logger.go:405 +0x4f1\ngithub.com/hjanuschka/go-deployd/internal/logging.(*Logger).Error(0xc0001fcb40, {0x1035aef0a, 0xc}, {0xc00016cf78, 0x1, 0xc000395251?})\n\t/Users/hjanuschka/go-deployd/internal/logging/logger.go:441 +0x136\ngithub.com/hjanuschka/go-deployd/internal/logging.Error({0x1035aef0a, 0xc}, {0x1035aafbc, 0x5}, 0xc00016d558)\n\t/Users/hjanuschka/go-deployd/internal/logging/logger.go:694 +0x234\ngithub.com/hjanuschka/go-deployd/internal/events.(*UniversalScriptManager).RunEvent(0xc000110cc0, {0x1035ac662, 0x8}, 0xc000164210, 0xc0003a63c0)\n\t/Users/hjanuschka/go-deployd/internal/events/manager.go:313 +0x14cd\ngithub.com/hjanuschka/go-deployd/internal/events_test.TestEventHandlerExecution.func1(0xc000102a80)\n\t/Users/hjanuschka/go-deployd/internal/events/integration_test.go:268 +0x6c6\ntesting.tRunner(0xc000102a80, 0xc0001144c8)\n\t/usr/local/Cellar/go/1.24.4/libexec/src/testing/testing.go:1792 +0xf4\ncreated by testing.(*T).Run in goroutine 38\n\t/usr/local/Cellar/go/1.24.4/libexec/src/testing/testing.go:1851 +0x413\n","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.488679+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"go-test","config_exists":{"runtime":""},"event":"delete","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.488716+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"go-test","config_exists":{"runtime":""},"event":"aftercommit","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.488743+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"go-test","config_exists":{"runtime":""},"event":"beforerequest","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.488792+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"go-test","config_exists":{"runtime":""},"event":"get","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.488814+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"go-test","config_exists":{"runtime":""},"event":"validate","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.488837+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"go-test","config_exists":{"runtime":"go"},"event":"post","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:25.48889+02:00","level":"INFO","message":"Compiling Go event script","component":"events","data":{"collection":"go-test","script":"post.go","source_path":"/var/folders/8k/r51k3md137dfl_qztlbdcp8h0000gp/T/TestGoAndJavaScriptEventParity2856327941/001/go-test/post.go"},"caller":"events/manager.go:104","environment":"development"}
{"timestamp":"2025-06-30T07:36:26.770842+02:00","level":"INFO","message":"Successfully compiled Go event script","component":"events","data":{"collection":"go-test","plugin_path":"/var/folders/8k/r51k3md137dfl_qztlbdcp8h0000gp/T/TestGoAndJavaScriptEventParity2856327941/001/go-test/.plugins/post.so","script":"post.go"},"caller":"events/manager.go:120","environment":"development"}
{"timestamp":"2025-06-30T07:36:26.770893+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"go-test","config_exists":{"runtime":""},"event":"put","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:26.77096+02:00","level":"DEBUG","message":"üöÄ EVENT TRIGGERED","data":{"collection":"","method":"POST","payload":{"name":"Test","value":42},"source":"event","type":"Post","user":null},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:26.771009+02:00","level":"DEBUG","message":"üîç CHECKING SCRIPT AVAILABILITY","data":{"allScripts":{"Post":"go"},"eventType":"Post","exists":true,"goPlugins":1,"jsScripts":0,"scriptType":"go","source":"event"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:26.771024+02:00","level":"DEBUG","message":"üîß EXECUTING GO SCRIPT","data":{"collection":"","eventType":"Post","hasScript":true,"pluginPath":"/var/folders/8k/r51k3md137dfl_qztlbdcp8h0000gp/T/TestGoAndJavaScriptEventParity2856327941/001/go-test/.plugins/post.so","source":"event"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:27.169649+02:00","level":"DEBUG","message":"Go plugin execution details","data":{"cancelled":false,"execTimeMs":0,"hasErrors":false,"loadTimeMs":398,"plugin":"post.so","source":"go-plugin","totalTimeMs":398},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:27.169688+02:00","level":"DEBUG","message":"üîß GO PLUGIN EXECUTION RESULT","data":{"dataAfter":{"eventType":"post","name":"Test","processed":true,"processedBy":"Go","value":42},"error":null,"eventType":"Post","source":"event"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:27.169751+02:00","level":"DEBUG","message":"Event completed","data":{"collection":"","dataModified":{"eventType":"post","name":"Test","processed":true,"processedBy":"Go","value":42},"duration":"398.802272ms","durationMs":398,"runtime":"go","source":"event","type":"Post"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:27.25753+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"js-test","config_exists":{"runtime":""},"event":"delete","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:27.257637+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"js-test","config_exists":{"runtime":""},"event":"aftercommit","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:27.257672+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"js-test","config_exists":{"runtime":""},"event":"beforerequest","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:27.278898+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"js-test","config_exists":{"runtime":""},"event":"get","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:27.278965+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"js-test","config_exists":{"runtime":""},"event":"validate","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:27.27901+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"js-test","config_exists":{"runtime":"js"},"event":"post","runtime":"js"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:27.2791+02:00","level":"DEBUG","message":"JavaScript source stored for compilation","data":{"filePath":"/var/folders/8k/r51k3md137dfl_qztlbdcp8h0000gp/T/TestGoAndJavaScriptEventParity2856327941/001/js-test/post.js","source":"v8-pool"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:27.279114+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"js-test","config_exists":{"runtime":""},"event":"put","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:27.279153+02:00","level":"DEBUG","message":"üöÄ EVENT TRIGGERED","data":{"collection":"","method":"POST","payload":{"name":"Test","value":42},"source":"event","type":"Post","user":null},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:27.279173+02:00","level":"DEBUG","message":"üîç CHECKING SCRIPT AVAILABILITY","data":{"allScripts":{"Post":"js"},"eventType":"Post","exists":true,"goPlugins":0,"jsScripts":1,"scriptType":"js","source":"event"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:27.279183+02:00","level":"DEBUG","message":"üîß EXECUTING JS SCRIPT","data":{"collection":"","eventType":"Post","hasScript":true,"source":"event"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:27.27922+02:00","level":"DEBUG","message":"Executing precompiled JavaScript script with V8 pool","data":{"scriptPath":"/var/folders/8k/r51k3md137dfl_qztlbdcp8h0000gp/T/TestGoAndJavaScriptEventParity2856327941/001/js-test/post.js","source":"js-execution"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:27.279497+02:00","level":"DEBUG","message":"Setting up JavaScript environment (V8)","data":{"dataKeys":"[REDACTED]","dataLen":2,"hasData":true,"source":"js-context"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:27.279663+02:00","level":"DEBUG","message":"Calling JavaScript Run(context) function (V8 pool)","data":{"hasContext":true,"hasRun":true,"source":"js-execution"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:27.279722+02:00","level":"INFO","message":"JavaScript context.log","data":{"message":"JavaScript post event executed","source":"js-context"},"caller":"logging/logger.go:678","environment":"development"}
{"timestamp":"2025-06-30T07:36:27.279759+02:00","level":"DEBUG","message":"Extracted context.data JSON from V8","data":{"contextDataJSON":"{\"name\":\"Test\",\"value\":42,\"eventType\":\"post\",\"processed\":true,\"processedBy\":\"JavaScript\"}","source":"js-extraction"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:27.279784+02:00","level":"DEBUG","message":"Successfully parsed context.data","data":{"contextDataKeys":"[REDACTED]","contextDataLen":5,"source":"js-extraction"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:27.279796+02:00","level":"INFO","message":"JavaScript execution timing","data":{"acquireTimeMs":0,"errorCount":0,"execTimeMs":0,"hasErrors":false,"pooled":true,"script":"post.js","source":"js-timing","totalTimeMs":0},"caller":"logging/logger.go:678","environment":"development"}
{"timestamp":"2025-06-30T07:36:27.279803+02:00","level":"DEBUG","message":"JavaScript execution completed (V8 pool)","data":{"errors":{},"hasCancelled":false,"hasErrors":false,"source":"js-execution"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:27.279955+02:00","level":"DEBUG","message":"Event completed","data":{"collection":"","dataModified":{"eventType":"post","name":"Test","processed":true,"processedBy":"JavaScript","value":42},"duration":"714.479¬µs","durationMs":0,"runtime":"js","source":"event","type":"Post"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:27.352952+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"TestLoadScripts2255305764","config_exists":{"runtime":""},"event":"beforerequest","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:27.353032+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"TestLoadScripts2255305764","config_exists":{"runtime":""},"event":"get","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:27.353059+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"TestLoadScripts2255305764","config_exists":{"runtime":""},"event":"validate","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:27.353077+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"TestLoadScripts2255305764","config_exists":{"runtime":""},"event":"post","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:27.353126+02:00","level":"INFO","message":"Compiling Go event script","component":"events","data":{"collection":"TestLoadScripts2255305764","script":"post.go","source_path":"/var/folders/8k/r51k3md137dfl_qztlbdcp8h0000gp/T/TestLoadScripts2255305764/post.go"},"caller":"events/manager.go:104","environment":"development"}
{"timestamp":"2025-06-30T07:36:28.546698+02:00","level":"INFO","message":"Successfully compiled Go event script","component":"events","data":{"collection":"TestLoadScripts2255305764","plugin_path":"/var/folders/8k/r51k3md137dfl_qztlbdcp8h0000gp/T/TestLoadScripts2255305764/.plugins/post.so","script":"post.go"},"caller":"events/manager.go:120","environment":"development"}
{"timestamp":"2025-06-30T07:36:28.54674+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"TestLoadScripts2255305764","config_exists":{"runtime":""},"event":"put","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:28.546796+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"TestLoadScripts2255305764","config_exists":{"runtime":""},"event":"delete","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:28.546819+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"TestLoadScripts2255305764","config_exists":{"runtime":""},"event":"aftercommit","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:28.548174+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"TestReloadScript1191373027","config_exists":{"runtime":""},"event":"get","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:28.548205+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"TestReloadScript1191373027","config_exists":{"runtime":""},"event":"validate","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:28.548227+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"TestReloadScript1191373027","config_exists":{"runtime":""},"event":"post","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:28.548268+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"TestReloadScript1191373027","config_exists":{"runtime":""},"event":"put","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:28.548306+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"TestReloadScript1191373027","config_exists":{"runtime":""},"event":"delete","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:28.548355+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"TestReloadScript1191373027","config_exists":{"runtime":""},"event":"aftercommit","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:28.548385+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"TestReloadScript1191373027","config_exists":{"runtime":""},"event":"beforerequest","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:28.548412+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"TestReloadScript1191373027","config_exists":{"runtime":""},"event":"aftercommit","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:28.548437+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"TestReloadScript1191373027","config_exists":{"runtime":""},"event":"beforerequest","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:28.548457+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"TestReloadScript1191373027","config_exists":{"runtime":""},"event":"get","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:28.548473+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"TestReloadScript1191373027","config_exists":{"runtime":""},"event":"validate","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:28.548487+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"TestReloadScript1191373027","config_exists":{"runtime":""},"event":"post","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:28.548505+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"TestReloadScript1191373027","config_exists":{"runtime":""},"event":"put","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:28.548521+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"TestReloadScript1191373027","config_exists":{"runtime":""},"event":"delete","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:28.549471+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"TestGetScriptInfo1424286817","config_exists":{"runtime":""},"event":"beforerequest","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:28.5495+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"TestGetScriptInfo1424286817","config_exists":{"runtime":""},"event":"get","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:28.54952+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"TestGetScriptInfo1424286817","config_exists":{"runtime":"go"},"event":"validate","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:28.549572+02:00","level":"INFO","message":"Compiling Go event script","component":"events","data":{"collection":"TestGetScriptInfo1424286817","script":"validate.go","source_path":"/var/folders/8k/r51k3md137dfl_qztlbdcp8h0000gp/T/TestGetScriptInfo1424286817/validate.go"},"caller":"events/manager.go:104","environment":"development"}
{"timestamp":"2025-06-30T07:36:29.694847+02:00","level":"INFO","message":"Successfully compiled Go event script","component":"events","data":{"collection":"TestGetScriptInfo1424286817","plugin_path":"/var/folders/8k/r51k3md137dfl_qztlbdcp8h0000gp/T/TestGetScriptInfo1424286817/.plugins/validate.so","script":"validate.go"},"caller":"events/manager.go:120","environment":"development"}
{"timestamp":"2025-06-30T07:36:29.694896+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"TestGetScriptInfo1424286817","config_exists":{"runtime":"js"},"event":"post","runtime":"js"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:29.694984+02:00","level":"DEBUG","message":"JavaScript source stored for compilation","data":{"filePath":"/var/folders/8k/r51k3md137dfl_qztlbdcp8h0000gp/T/TestGetScriptInfo1424286817/post.js","source":"v8-pool"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:29.695008+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"TestGetScriptInfo1424286817","config_exists":{"runtime":""},"event":"put","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:29.695036+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"TestGetScriptInfo1424286817","config_exists":{"runtime":""},"event":"delete","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:29.695059+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"TestGetScriptInfo1424286817","config_exists":{"runtime":""},"event":"aftercommit","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:29.695958+02:00","level":"DEBUG","message":"üöÄ EVENT TRIGGERED","data":{"collection":"","method":"POST","payload":{"name":"Test"},"source":"event","type":"Post","user":null},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:29.69599+02:00","level":"DEBUG","message":"üîç CHECKING SCRIPT AVAILABILITY","data":{"allScripts":{},"eventType":"Post","exists":false,"goPlugins":0,"jsScripts":0,"scriptType":"","source":"event"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:29.696001+02:00","level":"DEBUG","message":"‚ùå NO SCRIPT FOUND FOR EVENT","data":{"collection":"","eventType":"Post","source":"event"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:29.69677+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"TestRunEventJS81834617","config_exists":{"runtime":""},"event":"beforerequest","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:29.696802+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"TestRunEventJS81834617","config_exists":{"runtime":""},"event":"get","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:29.696825+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"TestRunEventJS81834617","config_exists":{"runtime":""},"event":"validate","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:29.696842+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"TestRunEventJS81834617","config_exists":{"runtime":""},"event":"post","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:29.696858+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"TestRunEventJS81834617","config_exists":{"runtime":"js"},"event":"put","runtime":"js"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:29.696903+02:00","level":"DEBUG","message":"JavaScript source stored for compilation","data":{"filePath":"/var/folders/8k/r51k3md137dfl_qztlbdcp8h0000gp/T/TestRunEventJS81834617/put.js","source":"v8-pool"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:29.696922+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"TestRunEventJS81834617","config_exists":{"runtime":""},"event":"delete","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:29.69694+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"TestRunEventJS81834617","config_exists":{"runtime":""},"event":"aftercommit","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:29.696958+02:00","level":"DEBUG","message":"üöÄ EVENT TRIGGERED","data":{"collection":"","method":"PUT","payload":{"name":"Test Document","value":42},"source":"event","type":"Put","user":"test-user-123"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:29.696996+02:00","level":"DEBUG","message":"üîç CHECKING SCRIPT AVAILABILITY","data":{"allScripts":{"Put":"js"},"eventType":"Put","exists":true,"goPlugins":0,"jsScripts":1,"scriptType":"js","source":"event"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:29.697009+02:00","level":"DEBUG","message":"üîß EXECUTING JS SCRIPT","data":{"collection":"","eventType":"Put","hasScript":true,"source":"event"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:29.697021+02:00","level":"DEBUG","message":"Executing precompiled JavaScript script with V8 pool","data":{"scriptPath":"/var/folders/8k/r51k3md137dfl_qztlbdcp8h0000gp/T/TestRunEventJS81834617/put.js","source":"js-execution"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:29.697259+02:00","level":"DEBUG","message":"Setting up JavaScript environment (V8)","data":{"dataKeys":"[REDACTED]","dataLen":2,"hasData":true,"source":"js-context"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:29.697414+02:00","level":"DEBUG","message":"Calling JavaScript Run(context) function (V8 pool)","data":{"hasContext":true,"hasRun":true,"source":"js-execution"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:29.697464+02:00","level":"DEBUG","message":"Extracted context.data JSON from V8","data":{"contextDataJSON":"{\"name\":\"Test Document\",\"value\":42,\"eventType\":\"post\",\"processed\":true}","source":"js-extraction"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:29.697494+02:00","level":"DEBUG","message":"Successfully parsed context.data","data":{"contextDataKeys":"[REDACTED]","contextDataLen":4,"source":"js-extraction"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:29.697506+02:00","level":"INFO","message":"JavaScript execution timing","data":{"acquireTimeMs":0,"errorCount":0,"execTimeMs":0,"hasErrors":false,"pooled":true,"script":"put.js","source":"js-timing","totalTimeMs":0},"caller":"logging/logger.go:678","environment":"development"}
{"timestamp":"2025-06-30T07:36:29.697514+02:00","level":"DEBUG","message":"JavaScript execution completed (V8 pool)","data":{"errors":{},"hasCancelled":false,"hasErrors":false,"source":"js-execution"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:29.69759+02:00","level":"DEBUG","message":"Event completed","data":{"collection":"","dataModified":{"eventType":"post","name":"Test Document","processed":true,"value":42},"duration":"606.014¬µs","durationMs":0,"runtime":"js","source":"event","type":"Put"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:29.698433+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"TestRunEventError928516473","config_exists":{"runtime":""},"event":"beforerequest","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:29.698474+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"TestRunEventError928516473","config_exists":{"runtime":""},"event":"get","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:29.698503+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"TestRunEventError928516473","config_exists":{"runtime":""},"event":"validate","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:29.698527+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"TestRunEventError928516473","config_exists":{"runtime":""},"event":"post","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:29.698557+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"TestRunEventError928516473","config_exists":{"runtime":""},"event":"put","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:29.698601+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"TestRunEventError928516473","config_exists":{"runtime":"js"},"event":"delete","runtime":"js"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:29.698661+02:00","level":"DEBUG","message":"JavaScript source stored for compilation","data":{"filePath":"/var/folders/8k/r51k3md137dfl_qztlbdcp8h0000gp/T/TestRunEventError928516473/delete.js","source":"v8-pool"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:29.698678+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"TestRunEventError928516473","config_exists":{"runtime":""},"event":"aftercommit","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:29.698711+02:00","level":"DEBUG","message":"üöÄ EVENT TRIGGERED","data":{"collection":"","method":"DELETE","payload":{},"source":"event","type":"Delete","user":null},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:29.698742+02:00","level":"DEBUG","message":"üîç CHECKING SCRIPT AVAILABILITY","data":{"allScripts":{"Delete":"js"},"eventType":"Delete","exists":true,"goPlugins":0,"jsScripts":1,"scriptType":"js","source":"event"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:29.698752+02:00","level":"DEBUG","message":"üîß EXECUTING JS SCRIPT","data":{"collection":"","eventType":"Delete","hasScript":true,"source":"event"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:29.698762+02:00","level":"DEBUG","message":"Executing precompiled JavaScript script with V8 pool","data":{"scriptPath":"/var/folders/8k/r51k3md137dfl_qztlbdcp8h0000gp/T/TestRunEventError928516473/delete.js","source":"js-execution"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:29.698922+02:00","level":"DEBUG","message":"Setting up JavaScript environment (V8)","data":{"dataKeys":"[REDACTED]","dataLen":0,"hasData":true,"source":"js-context"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:29.699029+02:00","level":"DEBUG","message":"Calling JavaScript Run(context) function (V8 pool)","data":{"hasContext":true,"hasRun":true,"source":"js-execution"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:29.699115+02:00","level":"DEBUG","message":"Run(context) function execution failed","data":{"error":"CANCEL","source":"js-execution"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:29.699141+02:00","level":"DEBUG","message":"Extracted context.data JSON from V8","data":{"contextDataJSON":"{}","source":"js-extraction"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:29.699154+02:00","level":"DEBUG","message":"Successfully parsed context.data","data":{"contextDataKeys":"[REDACTED]","contextDataLen":0,"source":"js-extraction"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:29.699164+02:00","level":"INFO","message":"JavaScript execution timing","data":{"acquireTimeMs":0,"errorCount":0,"execTimeMs":0,"hasErrors":false,"pooled":true,"script":"delete.js","source":"js-timing","totalTimeMs":0},"caller":"logging/logger.go:678","environment":"development"}
{"timestamp":"2025-06-30T07:36:29.699184+02:00","level":"DEBUG","message":"JavaScript execution completed (V8 pool)","data":{"errors":{},"hasCancelled":true,"hasErrors":false,"source":"js-execution"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:29.699257+02:00","level":"ERROR","message":"Event failed","data":{"collection":"","duration":"532.972¬µs","durationMs":0,"error":"Name is required","runtime":"js","source":"event","type":"Delete"},"caller":"logging/logger.go:694","stack_trace":"goroutine 100 [running]:\ngithub.com/hjanuschka/go-deployd/internal/logging.getStackTrace(...)\n\t/Users/hjanuschka/go-deployd/internal/logging/logger.go:268\ngithub.com/hjanuschka/go-deployd/internal/logging.(*Logger).log(0xc0001fcb40, 0x3, {0x1035aef0a, 0xc}, 0xc00004cd48)\n\t/Users/hjanuschka/go-deployd/internal/logging/logger.go:405 +0x4f1\ngithub.com/hjanuschka/go-deployd/internal/logging.(*Logger).Error(0xc0001fcb40, {0x1035aef0a, 0xc}, {0xc00004cfc8, 0x1, 0xc0003e7551?})\n\t/Users/hjanuschka/go-deployd/internal/logging/logger.go:441 +0x136\ngithub.com/hjanuschka/go-deployd/internal/logging.Error({0x1035aef0a, 0xc}, {0x1035aafbc, 0x5}, 0xc00004d5a8)\n\t/Users/hjanuschka/go-deployd/internal/logging/logger.go:694 +0x234\ngithub.com/hjanuschka/go-deployd/internal/events.(*UniversalScriptManager).RunEvent(0xc0005128a0, {0x1035ab5bd, 0x6}, 0xc0000f6370, 0xc0004521e0)\n\t/Users/hjanuschka/go-deployd/internal/events/manager.go:313 +0x14cd\ngithub.com/hjanuschka/go-deployd/internal/events_test.TestRunEventComprehensive.func3(0xc000502a80)\n\t/Users/hjanuschka/go-deployd/internal/events/manager_test.go:280 +0x2c5\ntesting.tRunner(0xc000502a80, 0x1043db9e8)\n\t/usr/local/Cellar/go/1.24.4/libexec/src/testing/testing.go:1792 +0xf4\ncreated by testing.(*T).Run in goroutine 65\n\t/usr/local/Cellar/go/1.24.4/libexec/src/testing/testing.go:1851 +0x413\n","environment":"development"}
{"timestamp":"2025-06-30T07:36:29.700559+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"TestMixedRuntime3430935032","config_exists":{"runtime":""},"event":"delete","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:29.700588+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"TestMixedRuntime3430935032","config_exists":{"runtime":""},"event":"aftercommit","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:29.70062+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"TestMixedRuntime3430935032","config_exists":{"runtime":""},"event":"beforerequest","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:29.700642+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"TestMixedRuntime3430935032","config_exists":{"runtime":"js"},"event":"get","runtime":"js"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:29.700691+02:00","level":"DEBUG","message":"JavaScript source stored for compilation","data":{"filePath":"/var/folders/8k/r51k3md137dfl_qztlbdcp8h0000gp/T/TestMixedRuntime3430935032/get.js","source":"v8-pool"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:29.700704+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"TestMixedRuntime3430935032","config_exists":{"runtime":""},"event":"validate","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:29.700723+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"TestMixedRuntime3430935032","config_exists":{"runtime":"go"},"event":"post","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:29.700762+02:00","level":"INFO","message":"Compiling Go event script","component":"events","data":{"collection":"TestMixedRuntime3430935032","script":"post.go","source_path":"/var/folders/8k/r51k3md137dfl_qztlbdcp8h0000gp/T/TestMixedRuntime3430935032/post.go"},"caller":"events/manager.go:104","environment":"development"}
{"timestamp":"2025-06-30T07:36:30.86698+02:00","level":"INFO","message":"Successfully compiled Go event script","component":"events","data":{"collection":"TestMixedRuntime3430935032","plugin_path":"/var/folders/8k/r51k3md137dfl_qztlbdcp8h0000gp/T/TestMixedRuntime3430935032/.plugins/post.so","script":"post.go"},"caller":"events/manager.go:120","environment":"development"}
{"timestamp":"2025-06-30T07:36:30.867028+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"TestMixedRuntime3430935032","config_exists":{"runtime":""},"event":"put","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:30.868489+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"TestDefaultRuntime586353711","config_exists":{"runtime":""},"event":"beforerequest","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:30.868582+02:00","level":"INFO","message":"Compiling Go event script","component":"events","data":{"collection":"TestDefaultRuntime586353711","script":"beforerequest.go","source_path":"/var/folders/8k/r51k3md137dfl_qztlbdcp8h0000gp/T/TestDefaultRuntime586353711/beforerequest.go"},"caller":"events/manager.go:104","environment":"development"}
{"timestamp":"2025-06-30T07:36:31.891888+02:00","level":"INFO","message":"Successfully compiled Go event script","component":"events","data":{"collection":"TestDefaultRuntime586353711","plugin_path":"/var/folders/8k/r51k3md137dfl_qztlbdcp8h0000gp/T/TestDefaultRuntime586353711/.plugins/beforerequest.so","script":"beforerequest.go"},"caller":"events/manager.go:120","environment":"development"}
{"timestamp":"2025-06-30T07:36:31.891938+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"TestDefaultRuntime586353711","config_exists":{"runtime":""},"event":"get","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:31.891977+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"TestDefaultRuntime586353711","config_exists":{"runtime":""},"event":"validate","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:31.892001+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"TestDefaultRuntime586353711","config_exists":{"runtime":""},"event":"post","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:31.892021+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"TestDefaultRuntime586353711","config_exists":{"runtime":""},"event":"put","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:31.892041+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"TestDefaultRuntime586353711","config_exists":{"runtime":""},"event":"delete","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:31.892066+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"TestDefaultRuntime586353711","config_exists":{"runtime":""},"event":"aftercommit","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:31.893004+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"TestNoFiles1473651889","config_exists":{"runtime":""},"event":"aftercommit","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:31.893045+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"TestNoFiles1473651889","config_exists":{"runtime":""},"event":"beforerequest","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:31.893065+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"TestNoFiles1473651889","config_exists":{"runtime":""},"event":"get","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:31.893115+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"TestNoFiles1473651889","config_exists":{"runtime":""},"event":"validate","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:31.893136+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"TestNoFiles1473651889","config_exists":{"runtime":""},"event":"post","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:31.89316+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"TestNoFiles1473651889","config_exists":{"runtime":""},"event":"put","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:31.893183+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"TestNoFiles1473651889","config_exists":{"runtime":""},"event":"delete","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:31.893782+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"TestHotReload1130432271","config_exists":{"runtime":""},"event":"validate","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:31.89381+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"TestHotReload1130432271","config_exists":{"runtime":""},"event":"post","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:31.89383+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"TestHotReload1130432271","config_exists":{"runtime":""},"event":"put","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:31.893847+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"TestHotReload1130432271","config_exists":{"runtime":""},"event":"delete","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:31.893865+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"TestHotReload1130432271","config_exists":{"runtime":""},"event":"aftercommit","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:31.893886+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"TestHotReload1130432271","config_exists":{"runtime":""},"event":"beforerequest","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:31.893904+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"TestHotReload1130432271","config_exists":{"runtime":""},"event":"get","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:31.894083+02:00","level":"INFO","message":"Hot-reloading Go event script","component":"events","data":{"collection":"TestHotReload1130432271","event":"aftercommit","plugin_path":"/var/folders/8k/r51k3md137dfl_qztlbdcp8h0000gp/T/TestHotReload1130432271/.plugins/aftercommit.so","source_path":"/var/folders/8k/r51k3md137dfl_qztlbdcp8h0000gp/T/TestHotReload1130432271/aftercommit.go"},"caller":"events/manager.go:412","environment":"development"}
{"timestamp":"2025-06-30T07:36:33.048831+02:00","level":"INFO","message":"Successfully hot-reloaded Go event script","component":"events","data":{"collection":"TestHotReload1130432271","event":"aftercommit","plugin_path":"/var/folders/8k/r51k3md137dfl_qztlbdcp8h0000gp/T/TestHotReload1130432271/.plugins/aftercommit.so","source_path":"/var/folders/8k/r51k3md137dfl_qztlbdcp8h0000gp/T/TestHotReload1130432271/aftercommit.go"},"caller":"events/manager.go:427","environment":"development"}
{"timestamp":"2025-06-30T07:36:33.050205+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"TestStartupPlugins18834421","config_exists":{"runtime":""},"event":"delete","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:33.050253+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"TestStartupPlugins18834421","config_exists":{"runtime":""},"event":"aftercommit","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:33.050278+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"TestStartupPlugins18834421","config_exists":{"runtime":""},"event":"beforerequest","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:33.050299+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"TestStartupPlugins18834421","config_exists":{"runtime":""},"event":"get","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:33.050319+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"TestStartupPlugins18834421","config_exists":{"runtime":""},"event":"validate","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:33.050339+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"TestStartupPlugins18834421","config_exists":{"runtime":"go"},"event":"post","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:33.050387+02:00","level":"INFO","message":"Compiling Go event script","component":"events","data":{"collection":"TestStartupPlugins18834421","script":"post.go","source_path":"/var/folders/8k/r51k3md137dfl_qztlbdcp8h0000gp/T/TestStartupPlugins18834421/post.go"},"caller":"events/manager.go:104","environment":"development"}
{"timestamp":"2025-06-30T07:36:34.124617+02:00","level":"INFO","message":"Successfully compiled Go event script","component":"events","data":{"collection":"TestStartupPlugins18834421","plugin_path":"/var/folders/8k/r51k3md137dfl_qztlbdcp8h0000gp/T/TestStartupPlugins18834421/.plugins/post.so","script":"post.go"},"caller":"events/manager.go:120","environment":"development"}
{"timestamp":"2025-06-30T07:36:34.124675+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"TestStartupPlugins18834421","config_exists":{"runtime":""},"event":"put","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:34.126114+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"TestMultipleStartupPlugins1514560604","config_exists":{"runtime":""},"event":"get","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:34.126143+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"TestMultipleStartupPlugins1514560604","config_exists":{"runtime":"go"},"event":"validate","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:34.126202+02:00","level":"INFO","message":"Compiling Go event script","component":"events","data":{"collection":"TestMultipleStartupPlugins1514560604","script":"validate.go","source_path":"/var/folders/8k/r51k3md137dfl_qztlbdcp8h0000gp/T/TestMultipleStartupPlugins1514560604/validate.go"},"caller":"events/manager.go:104","environment":"development"}
{"timestamp":"2025-06-30T07:36:35.172599+02:00","level":"INFO","message":"Successfully compiled Go event script","component":"events","data":{"collection":"TestMultipleStartupPlugins1514560604","plugin_path":"/var/folders/8k/r51k3md137dfl_qztlbdcp8h0000gp/T/TestMultipleStartupPlugins1514560604/.plugins/validate.so","script":"validate.go"},"caller":"events/manager.go:120","environment":"development"}
{"timestamp":"2025-06-30T07:36:35.172649+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"TestMultipleStartupPlugins1514560604","config_exists":{"runtime":"go"},"event":"post","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:35.172727+02:00","level":"INFO","message":"Compiling Go event script","component":"events","data":{"collection":"TestMultipleStartupPlugins1514560604","script":"post.go","source_path":"/var/folders/8k/r51k3md137dfl_qztlbdcp8h0000gp/T/TestMultipleStartupPlugins1514560604/post.go"},"caller":"events/manager.go:104","environment":"development"}
{"timestamp":"2025-06-30T07:36:36.229835+02:00","level":"INFO","message":"Successfully compiled Go event script","component":"events","data":{"collection":"TestMultipleStartupPlugins1514560604","plugin_path":"/var/folders/8k/r51k3md137dfl_qztlbdcp8h0000gp/T/TestMultipleStartupPlugins1514560604/.plugins/post.so","script":"post.go"},"caller":"events/manager.go:120","environment":"development"}
{"timestamp":"2025-06-30T07:36:36.229889+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"TestMultipleStartupPlugins1514560604","config_exists":{"runtime":"go"},"event":"put","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:36.230001+02:00","level":"INFO","message":"Compiling Go event script","component":"events","data":{"collection":"TestMultipleStartupPlugins1514560604","script":"put.go","source_path":"/var/folders/8k/r51k3md137dfl_qztlbdcp8h0000gp/T/TestMultipleStartupPlugins1514560604/put.go"},"caller":"events/manager.go:104","environment":"development"}
{"timestamp":"2025-06-30T07:36:37.152901+02:00","level":"INFO","message":"Successfully compiled Go event script","component":"events","data":{"collection":"TestMultipleStartupPlugins1514560604","plugin_path":"/var/folders/8k/r51k3md137dfl_qztlbdcp8h0000gp/T/TestMultipleStartupPlugins1514560604/.plugins/put.so","script":"put.go"},"caller":"events/manager.go:120","environment":"development"}
{"timestamp":"2025-06-30T07:36:37.152952+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"TestMultipleStartupPlugins1514560604","config_exists":{"runtime":""},"event":"delete","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:37.152992+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"TestMultipleStartupPlugins1514560604","config_exists":{"runtime":""},"event":"aftercommit","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:37.153016+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"TestMultipleStartupPlugins1514560604","config_exists":{"runtime":""},"event":"beforerequest","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:37.154781+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"TestStartupPluginConfig476568923","config_exists":{"runtime":""},"event":"post","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:37.154809+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"TestStartupPluginConfig476568923","config_exists":{"runtime":""},"event":"put","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:37.154828+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"TestStartupPluginConfig476568923","config_exists":{"runtime":""},"event":"delete","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:37.154866+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"TestStartupPluginConfig476568923","config_exists":{"runtime":""},"event":"aftercommit","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:37.154886+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"TestStartupPluginConfig476568923","config_exists":{"runtime":""},"event":"beforerequest","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:37.154903+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"TestStartupPluginConfig476568923","config_exists":{"runtime":"go"},"event":"get","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:37.154949+02:00","level":"INFO","message":"Compiling Go event script","component":"events","data":{"collection":"TestStartupPluginConfig476568923","script":"get.go","source_path":"/var/folders/8k/r51k3md137dfl_qztlbdcp8h0000gp/T/TestStartupPluginConfig476568923/get.go"},"caller":"events/manager.go:104","environment":"development"}
{"timestamp":"2025-06-30T07:36:38.049342+02:00","level":"INFO","message":"Successfully compiled Go event script","component":"events","data":{"collection":"TestStartupPluginConfig476568923","plugin_path":"/var/folders/8k/r51k3md137dfl_qztlbdcp8h0000gp/T/TestStartupPluginConfig476568923/.plugins/get.so","script":"get.go"},"caller":"events/manager.go:120","environment":"development"}
{"timestamp":"2025-06-30T07:36:38.049396+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"TestStartupPluginConfig476568923","config_exists":{"runtime":""},"event":"validate","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:38.050823+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"RuntimeCompilation1594109441","config_exists":{"runtime":""},"event":"get","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:38.050855+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"RuntimeCompilation1594109441","config_exists":{"runtime":""},"event":"validate","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:38.050883+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"RuntimeCompilation1594109441","config_exists":{"runtime":"js"},"event":"post","runtime":"js"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:38.050933+02:00","level":"DEBUG","message":"JavaScript source stored for compilation","data":{"filePath":"/var/folders/8k/r51k3md137dfl_qztlbdcp8h0000gp/T/RuntimeCompilation1594109441/post.js","source":"v8-pool"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:38.050949+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"RuntimeCompilation1594109441","config_exists":{"runtime":""},"event":"put","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:38.050971+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"RuntimeCompilation1594109441","config_exists":{"runtime":""},"event":"delete","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:38.050991+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"RuntimeCompilation1594109441","config_exists":{"runtime":""},"event":"aftercommit","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:38.051018+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"RuntimeCompilation1594109441","config_exists":{"runtime":""},"event":"beforerequest","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:38.051042+02:00","level":"DEBUG","message":"üöÄ EVENT TRIGGERED","data":{"collection":"","method":"POST","payload":{"test":"runtime"},"source":"event","type":"Post","user":null},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:38.05109+02:00","level":"DEBUG","message":"üîç CHECKING SCRIPT AVAILABILITY","data":{"allScripts":{"Post":"js"},"eventType":"Post","exists":true,"goPlugins":0,"jsScripts":1,"scriptType":"js","source":"event"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:38.051102+02:00","level":"DEBUG","message":"üîß EXECUTING JS SCRIPT","data":{"collection":"","eventType":"Post","hasScript":true,"source":"event"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:38.051115+02:00","level":"DEBUG","message":"Executing precompiled JavaScript script with V8 pool","data":{"scriptPath":"/var/folders/8k/r51k3md137dfl_qztlbdcp8h0000gp/T/RuntimeCompilation1594109441/post.js","source":"js-execution"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:38.051361+02:00","level":"DEBUG","message":"Setting up JavaScript environment (V8)","data":{"dataKeys":"[REDACTED]","dataLen":1,"hasData":true,"source":"js-context"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:38.051507+02:00","level":"DEBUG","message":"Calling JavaScript Run(context) function (V8 pool)","data":{"hasContext":true,"hasRun":true,"source":"js-execution"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:38.051568+02:00","level":"DEBUG","message":"Run(context) function execution failed","data":{"error":"CANCEL","source":"js-execution"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:38.051596+02:00","level":"DEBUG","message":"Extracted context.data JSON from V8","data":{"contextDataJSON":"{\"test\":\"runtime\"}","source":"js-extraction"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:38.051616+02:00","level":"DEBUG","message":"Successfully parsed context.data","data":{"contextDataKeys":"[REDACTED]","contextDataLen":1,"source":"js-extraction"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:38.051632+02:00","level":"INFO","message":"JavaScript execution timing","data":{"acquireTimeMs":0,"errorCount":0,"execTimeMs":0,"hasErrors":false,"pooled":true,"script":"post.js","source":"js-timing","totalTimeMs":0},"caller":"logging/logger.go:678","environment":"development"}
{"timestamp":"2025-06-30T07:36:38.051643+02:00","level":"DEBUG","message":"JavaScript execution completed (V8 pool)","data":{"errors":{},"hasCancelled":true,"hasErrors":false,"source":"js-execution"},"caller":"logging/logger.go:670","environment":"development"}
{"timestamp":"2025-06-30T07:36:38.051717+02:00","level":"ERROR","message":"Event failed","data":{"collection":"","duration":"654.325¬µs","durationMs":0,"error":"Name is required","runtime":"js","source":"event","type":"Post"},"caller":"logging/logger.go:694","stack_trace":"goroutine 119 [running]:\ngithub.com/hjanuschka/go-deployd/internal/logging.getStackTrace(...)\n\t/Users/hjanuschka/go-deployd/internal/logging/logger.go:268\ngithub.com/hjanuschka/go-deployd/internal/logging.(*Logger).log(0xc0001fcb40, 0x3, {0x1035aef0a, 0xc}, 0xc0002ecd40)\n\t/Users/hjanuschka/go-deployd/internal/logging/logger.go:405 +0x4f1\ngithub.com/hjanuschka/go-deployd/internal/logging.(*Logger).Error(0xc0001fcb40, {0x1035aef0a, 0xc}, {0xc0002ecfc0, 0x1, 0xc000394109?})\n\t/Users/hjanuschka/go-deployd/internal/logging/logger.go:441 +0x136\ngithub.com/hjanuschka/go-deployd/internal/logging.Error({0x1035aef0a, 0xc}, {0x1035aafbc, 0x5}, 0xc0002ed5a0)\n\t/Users/hjanuschka/go-deployd/internal/logging/logger.go:694 +0x234\ngithub.com/hjanuschka/go-deployd/internal/events.(*UniversalScriptManager).RunEvent(0xc00019ad80, {0x1035aab27, 0x4}, 0xc000164370, 0xc000117e00)\n\t/Users/hjanuschka/go-deployd/internal/events/manager.go:313 +0x14cd\ngithub.com/hjanuschka/go-deployd/internal/events_test.TestPreCompiledPluginExecution.func2(0xc000226540)\n\t/Users/hjanuschka/go-deployd/internal/events/startup_plugins_test.go:285 +0x3e7\ntesting.tRunner(0xc000226540, 0x1043db9d0)\n\t/usr/local/Cellar/go/1.24.4/libexec/src/testing/testing.go:1792 +0xf4\ncreated by testing.(*T).Run in goroutine 117\n\t/usr/local/Cellar/go/1.24.4/libexec/src/testing/testing.go:1851 +0x413\n","environment":"development"}
{"timestamp":"2025-06-30T07:36:38.053102+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"PluginArchitecture1483224854","config_exists":{"runtime":""},"event":"get","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:38.053152+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"PluginArchitecture1483224854","config_exists":{"runtime":"go"},"event":"validate","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:38.053199+02:00","level":"INFO","message":"Compiling Go event script","component":"events","data":{"collection":"PluginArchitecture1483224854","script":"validate.go","source_path":"/var/folders/8k/r51k3md137dfl_qztlbdcp8h0000gp/T/PluginArchitecture1483224854/validate.go"},"caller":"events/manager.go:104","environment":"development"}
{"timestamp":"2025-06-30T07:36:38.871156+02:00","level":"INFO","message":"Successfully compiled Go event script","component":"events","data":{"collection":"PluginArchitecture1483224854","plugin_path":"/var/folders/8k/r51k3md137dfl_qztlbdcp8h0000gp/T/PluginArchitecture1483224854/.plugins/validate.so","script":"validate.go"},"caller":"events/manager.go:120","environment":"development"}
{"timestamp":"2025-06-30T07:36:38.871223+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"PluginArchitecture1483224854","config_exists":{"runtime":"go"},"event":"post","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:38.871379+02:00","level":"INFO","message":"Compiling Go event script","component":"events","data":{"collection":"PluginArchitecture1483224854","script":"post.go","source_path":"/var/folders/8k/r51k3md137dfl_qztlbdcp8h0000gp/T/PluginArchitecture1483224854/post.go"},"caller":"events/manager.go:104","environment":"development"}
{"timestamp":"2025-06-30T07:36:39.894573+02:00","level":"INFO","message":"Successfully compiled Go event script","component":"events","data":{"collection":"PluginArchitecture1483224854","plugin_path":"/var/folders/8k/r51k3md137dfl_qztlbdcp8h0000gp/T/PluginArchitecture1483224854/.plugins/post.so","script":"post.go"},"caller":"events/manager.go:120","environment":"development"}
{"timestamp":"2025-06-30T07:36:39.894633+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"PluginArchitecture1483224854","config_exists":{"runtime":"go"},"event":"put","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:39.894716+02:00","level":"INFO","message":"Compiling Go event script","component":"events","data":{"collection":"PluginArchitecture1483224854","script":"put.go","source_path":"/var/folders/8k/r51k3md137dfl_qztlbdcp8h0000gp/T/PluginArchitecture1483224854/put.go"},"caller":"events/manager.go:104","environment":"development"}
{"timestamp":"2025-06-30T07:36:40.724142+02:00","level":"INFO","message":"Successfully compiled Go event script","component":"events","data":{"collection":"PluginArchitecture1483224854","plugin_path":"/var/folders/8k/r51k3md137dfl_qztlbdcp8h0000gp/T/PluginArchitecture1483224854/.plugins/put.so","script":"put.go"},"caller":"events/manager.go:120","environment":"development"}
{"timestamp":"2025-06-30T07:36:40.724182+02:00","level":"DEBUG","message":"Loading event script","component":"events","data":{"collection":"PluginArchitecture1483224854","config_exists":{"runtime":"go"},"event":"delete","runtime":"go"},"caller":"events/manager.go:92","environment":"development"}
{"timestamp":"2025-06-30T07:36:40.724289+02:00","level":"INFO","message":"Compiling Go event script","component":"events","data":{"collection":"PluginArchitecture1483224854","script":"delete.go","source_path":"/var/folders/8k/r51k3md137dfl_qztlbdcp8h0000gp/T/PluginArchitecture1483224854/delete.go"},"caller":"events/manager.go:104","environment":"development"}
